# TIER IV Autoware API Extension

This repository provides TIER IV Autoware API that specialized for use cases in TIER IV.
Some pages in this documentation are only in Japanese.

## Note

TIER IV Autoware API is sometimes called High-level API or TIER IV External API.

## TIER IV Autoware API

These APIs are specialized for use cases in TIER IV. There are currently no plans to move to AD API, but this may be done if there are many requests from the community.

| Type    | Name                                                                                                           | Message/Service                                                                                                                                                                                 |
| ------- | -------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| service | [/api/external/get/metadata/packages](./doc/api/external/get/metadata/packages.md)                             | [tier4_external_api_msgs/srv/GetMetadataPackages](https://github.com/tier4/tier4_autoware_msgs/tree/tier4/universe/tier4_external_api_msgs/srv/GetMetadataPackages.srv)                         |
| topic   | [/api/external/get/planning_factors](./doc/api/external/get/planning_factors.md)                               | [tier4_external_api_msgs/msg/PlanningFactorArray](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/msg/PlanningFactorArray.msg)                         |
| topic   | [/api/external/get/route_distance](./doc/api/external/get/route_distance.md)                                   | [tier4_external_api_msgs/msg/RouteDistance](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/msg/RouteDistance.msg)                                     |
| topic   | [/api/external/get/nearest_traffic_light_group](./doc/api/external/get/nearest_traffic_light_group.md)         | [tier4_external_api_msgs/msg/TrafficLightGroup](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/msg/TrafficLightGroup.msg)                             |
| topic   | [/api/external/set/virtual_traffic_light/states](./doc/api/external/set/virtual_traffic_light/states.md)       | [tier4_v2x_msgs/msg/VirtualTrafficLightStateArray](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_v2x_msgs/msg/VirtualTrafficLightStateArray.msg)                       |
| topic   | [/api/external/get/virtual_traffic_light/commands](./doc/api/external/get/virtual_traffic_light/commands.md)   | [tier4_v2x_msgs/msg/InfrastructureCommandArray](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_v2x_msgs/msg/InfrastructureCommandArray.msg)                             |
| service | [/api/external/set/service](./doc/api/external/set/service.md)                                                 | [tier4_external_api_msgs/srv/SetService](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/srv/SetService.srv)                                           |
| topic   | [/api/external/get/service](./doc/api/external/get/service.md)                                                 | [tier4_external_api_msgs/msg/Service](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/msg/Service.msg)                                                 |
| topic   | [/api/external/get/diagnostics](./doc/api/external/get/diagnostics.md)                                         | [tier4_external_api_msgs/msg/ClassifiedDiagnostics](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/msg/ClassifiedDiagnostics.msg)                     |
| topic   | [/api/external/get/localization_scores](./doc/api/external/get/localization_scores.md)                         | [tier4_external_api_msgs/msg/LocalizationScoreArray](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/msg/LocalizationScoreArray.msg)                   |
| topic   | [/api/external/get/map/info/hash](./doc/api/external/get/map/info/hash.md)                                     | [tier4_external_api_msgs/msg/MapHash](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/msg/MapHash.msg)                                                 |
| service | [/api/external/get/map/lanelet/xml](./doc/api/external/get/map/lanelet/xml.md)                                 | [tier4_external_api_msgs/srv/GetTextFile](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/srv/GetTextFile.srv)                                         |
| service | [/api/external/set/rosbag_logging_mode](./doc/api/external/set/rosbag_logging_mode.md)                         | [tier4_external_api_msgs/srv/SetRosbagLoggingMode](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/srv/SetRosbagLoggingMode.srv)                       |
| topic   | [/api/external/get/rosbag_logging_mode](./doc/api/external/get/rosbag_logging_mode.md)                         | [tier4_external_api_msgs/msg/RosbagLoggingMode](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/msg/RosbagLoggingMode.msg)                             |
| topic   | [/api/external/get/calibration_status](./doc/api/external/get/calibration_status.md)                           | [tier4_external_api_msgs/msg/CalibrationStatusArray](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/msg/CalibrationStatusArray.msg)                   |
| service | [/api/external/get/accel_brake_map_calibrator/data](./doc/api/external/get/accel_brake_map_calibrator/data.md) | [tier4_external_api_msgs/srv/GetAccelBrakeMapCalibrationData](https://github.com/tier4/tier4_autoware_msgs/blob/tier4/universe/tier4_external_api_msgs/srv/GetAccelBrakeMapCalibrationData.srv) |

## Deprecated API

These are old implementations used internally by TIER IV.
Please use [AD API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/) instead.

| Type    | Name                                                                                                                               | AD API                                                                                                                                            | Migration Guide                                                                                                                                             |
| ------- | ---------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |
| service | [/api/external/get/version](./doc/api/external/get/version.md)                                                                     | [Interface API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/interface/)           | -                                                                                                                                                           |
| service | [/api/external/set/initialize_pose](./doc/api/external/set/initialize_pose.md)                                                     | [Localization API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/localization/)     | -                                                                                                                                                           |
| service | [/api/external/set/initialize_pose_auto](./doc/api/external/set/initialize_pose_auto.md)                                           | [Localization API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/localization/)     | -                                                                                                                                                           |
| service | [/api/external/set/route](./doc/api/external/set/route.md)                                                                         | [Routing API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/routing/)               | -                                                                                                                                                           |
| topic   | [/api/external/get/route](./doc/api/external/get/route.md)                                                                         | [Routing API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/routing/)               | -                                                                                                                                                           |
| service | [/api/external/set/clear_route](./doc/api/external/set/clear_route.md)                                                             | [Routing API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/routing/)               | -                                                                                                                                                           |
| service | [/api/external/set/engage](./doc/api/external/set/engage.md)                                                                       | [Operation mode API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/operation_mode/) | [Operation mode compatibility](./doc/migration/operation-mode.md)                                                                                           |
| topic   | [/api/external/get/engage](./doc/api/external/get/engage.md)                                                                       | [Operation mode API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/operation_mode/) | [Operation mode compatibility](./doc/migration/operation-mode.md)                                                                                           |
| service | [/api/external/set/operator](./doc/api/external/set/operator.md)                                                                   | [Operation mode API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/operation_mode/) | [Operation mode compatibility](./doc/migration/operation-mode.md)                                                                                           |
| topic   | [/api/external/get/operator](./doc/api/external/get/operator.md)                                                                   | [Operation mode API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/operation_mode/) | [Operation mode compatibility](./doc/migration/operation-mode.md)                                                                                           |
| service | [/api/external/set/observer](./doc/api/external/set/observer.md)                                                                   | [Operation mode API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/operation_mode/) | [Operation mode compatibility](./doc/migration/operation-mode.md)                                                                                           |
| topic   | [/api/external/get/observer](./doc/api/external/get/observer.md)                                                                   | [Operation mode API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/operation_mode/) | [Operation mode compatibility](./doc/migration/operation-mode.md)                                                                                           |
| service | [/api/external/set/pause_driving](./doc/api/external/set/pause_driving.md)                                                         | [Operation mode API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/operation_mode/) | [Operation mode compatibility](./doc/migration/operation-mode.md)                                                                                           |
| service | [/api/autoware/set/start_request](./doc/api/autoware/set/start_request.md)                                                         | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| service | [/api/external/set/emergency](./doc/api/external/set/emergency.md)                                                                 | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/get/emergency](./doc/api/external/get/emergency.md)                                                                 | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/get/vehicle/status](./doc/api/external/get/vehicle/status.md)                                                       | [Vehicle status API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/vehicle-status/) | -                                                                                                                                                           |
| service | [/api/external/set/door](./doc/api/external/set/door.md)                                                                           | [Vehicle doors API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/vehicle-doors/)   | -                                                                                                                                                           |
| topic   | [/api/external/get/door](./doc/api/external/get/door.md)                                                                           | [Vehicle doors API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/vehicle-doors/)   | -                                                                                                                                                           |
| service | [/api/external/set/velocity_limit](./doc/api/external/set/velocity_limit.md)                                                       | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/set/command/local/control](./doc/api/external/set/command/local/control.md)                                         | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/set/command/local/shift](./doc/api/external/set/command/local/shift.md)                                             | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/set/command/local/turn_signal](./doc/api/external/set/command/local/turn_signal.md)                                 | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/set/command/local/heartbeat](./doc/api/external/set/command/local/heartbeat.md)                                     | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/set/command/remote/control](./doc/api/external/set/command/remote/control.md)                                       | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/set/command/remote/shift](./doc/api/external/set/command/remote/shift.md)                                           | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/set/command/remote/turn_signal](./doc/api/external/set/command/remote/turn_signal.md)                               | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/set/command/remote/heartbeat](./doc/api/external/set/command/remote/heartbeat.md)                                   | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/get/command/selected/control](./doc/api/external/get/command/selected/control.md)                                   | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/external/get/command/selected/vehicle](./doc/api/external/get/command/selected/vehicle.md)                                   | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/iv_msgs/planning/scenario_planning/trajectory](./doc/api/iv_msgs/planning/scenario_planning/trajectory.md)                   | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/iv_msgs/perception/object_recognition/tracking/objects](./doc/api/iv_msgs/perception/object_recognition/tracking/objects.md) | T.B.D.                                                                                                                                            | -                                                                                                                                                           |
| topic   | [/api/iv_msgs/autoware/state](./doc/api/iv_msgs/autoware/state.md)                                                                 | None                                                                                                                                              | [Autoware state compatibility](https://autowarefoundation.github.io/autoware_universe/main/system/autoware_default_adapi_universe/document/autoware-state/) |

## Removed API

These APIs are removed.
Please use [AD API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/) instead.

| Type  | Name                                                                                         | AD API                                                                                                                                            |
| ----- | -------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| topic | [/api/iv_msgs/vehicle/status/control_mode](./doc/api/iv_msgs/vehicle/status/control_mode.md) | [Operation mode API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/operation_mode/) |
